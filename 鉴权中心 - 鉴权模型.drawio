<mxfile host="app.diagrams.net" modified="2021-09-14T03:14:29.333Z" agent="5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/93.0.4577.63 Safari/537.36" etag="_V8JAE7WyE_H6mu_YydS" version="15.2.1" type="github">
  <diagram id="C5RBs43oDa-KdzZeNtuy" name="Page-1">
    <mxGraphModel dx="1426" dy="-420" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-1" parent="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="JHoGeUMgcDAlhT3e80eg-0" value="auth center" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="649" y="1710" width="116" height="548" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-33" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" vertex="1" parent="JHoGeUMgcDAlhT3e80eg-0">
          <mxGeometry x="53" y="221" width="10" height="166" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-51" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeColor=#000000;fillColor=#FFFFFF;" vertex="1" parent="JHoGeUMgcDAlhT3e80eg-0">
          <mxGeometry x="53" y="402" width="10" height="68" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-1" value="consumer" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#a20025;strokeColor=#6F0000;fontColor=#ffffff;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="83" y="1710" width="106" height="556" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-17" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" vertex="1" parent="JHoGeUMgcDAlhT3e80eg-1">
          <mxGeometry x="48.62" y="52" width="10" height="72" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-32" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" vertex="1" parent="JHoGeUMgcDAlhT3e80eg-1">
          <mxGeometry x="49" y="221" width="10" height="155" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-50" value="周&lt;br&gt;期&lt;br&gt;性" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeColor=#000000;fillColor=#FFFFFF;" vertex="1" parent="JHoGeUMgcDAlhT3e80eg-1">
          <mxGeometry x="45" y="402" width="16" height="65" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-5" value="provider" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#0050ef;strokeColor=#001DBC;fontColor=#ffffff;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="53" y="2406" width="101" height="623" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-6" value="consumer" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#a20025;strokeColor=#6F0000;fontColor=#ffffff;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="672.5" y="2406" width="101" height="623" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-7" value="consumer owner接入auth center流程" style="swimlane;childLayout=stackLayout;horizontal=1;fillColor=none;horizontalStack=1;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;strokeColor=none;stackBorder=10;stackSpacing=-12;resizable=1;align=center;points=[];fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="17" y="1227" width="648" height="101" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-8" value="consumer owner登录管控台" style="shape=step;perimeter=stepPerimeter;fixedSize=1;points=[];" vertex="1" parent="JHoGeUMgcDAlhT3e80eg-7">
          <mxGeometry x="10" y="33" width="100" height="58" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-9" value="Step 2" style="shape=step;perimeter=stepPerimeter;fixedSize=1;points=[];" vertex="1" parent="JHoGeUMgcDAlhT3e80eg-7">
          <mxGeometry x="98" y="33" width="100" height="58" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-10" value="Step 3" style="shape=step;perimeter=stepPerimeter;fixedSize=1;points=[];" vertex="1" parent="JHoGeUMgcDAlhT3e80eg-7">
          <mxGeometry x="186" y="33" width="100" height="58" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-11" value="Step 3" style="shape=step;perimeter=stepPerimeter;fixedSize=1;points=[];" vertex="1" parent="JHoGeUMgcDAlhT3e80eg-7">
          <mxGeometry x="274" y="33" width="100" height="58" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-12" value="Step 3" style="shape=step;perimeter=stepPerimeter;fixedSize=1;points=[];" vertex="1" parent="JHoGeUMgcDAlhT3e80eg-7">
          <mxGeometry x="362" y="33" width="100" height="58" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-13" value="Step 3" style="shape=step;perimeter=stepPerimeter;fixedSize=1;points=[];" vertex="1" parent="JHoGeUMgcDAlhT3e80eg-7">
          <mxGeometry x="450" y="33" width="100" height="58" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-16" value="Step 3" style="shape=step;perimeter=stepPerimeter;fixedSize=1;points=[];" vertex="1" parent="JHoGeUMgcDAlhT3e80eg-7">
          <mxGeometry x="538" y="33" width="100" height="58" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1.138;entryY=0.504;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="702" y="1805.976" as="sourcePoint" />
            <mxPoint x="143" y="1805.976" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-24" value="生成该应用的密钥，用于身份识别认证" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="JHoGeUMgcDAlhT3e80eg-22">
          <mxGeometry x="0.3739" relative="1" as="geometry">
            <mxPoint x="77" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-18" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="702" y="1762" width="10" height="61" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="141.6199999999999" y="1773" as="sourcePoint" />
            <mxPoint x="702" y="1773" as="targetPoint" />
            <Array as="points">
              <mxPoint x="616" y="1773" />
              <mxPoint x="616" y="1773" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-20" value="owner使用工号登陆管控台注册consumer应用" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="JHoGeUMgcDAlhT3e80eg-19">
          <mxGeometry x="-0.4318" y="1" relative="1" as="geometry">
            <mxPoint x="97" y="-1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-27" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="131.62" y="1857" width="10" height="60" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-31" value="将应用密钥配置在Apollo或者环境变量" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1.138;entryY=0.767;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" target="JHoGeUMgcDAlhT3e80eg-27" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="141.62" y="1868" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="185" y="1868" />
              <mxPoint x="185" y="1904" />
              <mxPoint x="147" y="1904" />
              <mxPoint x="147" y="1903" />
            </Array>
            <mxPoint x="147" y="1904" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-34" value="将（IP+应用名+密钥配置）传递给auth，请求token" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.1;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="142" y="1947" as="sourcePoint" />
            <mxPoint x="703" y="1947" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-41" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endSize=6;strokeColor=#000000;dashed=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="JHoGeUMgcDAlhT3e80eg-37">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="281" y="1987" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-42" value="识别失败" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="JHoGeUMgcDAlhT3e80eg-41">
          <mxGeometry x="-0.0093" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-48" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;startFill=0;endSize=6;strokeColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="JHoGeUMgcDAlhT3e80eg-37">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="144" y="2054" as="targetPoint" />
            <Array as="points">
              <mxPoint x="425" y="2054" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-49" value="识别成功，下发token和refresh_token" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="JHoGeUMgcDAlhT3e80eg-48">
          <mxGeometry x="0.2776" y="-1" relative="1" as="geometry">
            <mxPoint x="28" y="-1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-37" value="" style="rhombus;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="406" y="1966" width="38" height="39" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-40" value="&lt;span style=&quot;font-size: 12px ; background-color: rgb(248 , 249 , 250)&quot;&gt;对consumer进行身份识别&lt;/span&gt;" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#000000;endSize=6;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="JHoGeUMgcDAlhT3e80eg-33" target="JHoGeUMgcDAlhT3e80eg-37">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="621" y="1987" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-47" value="" style="ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="252" y="1970.5" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-52" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.2;entryY=0.4;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=none;startFill=0;endSize=6;strokeColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="142" y="2129.5" as="sourcePoint" />
            <mxPoint x="700" y="2129" as="targetPoint" />
            <Array as="points">
              <mxPoint x="421" y="2129" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-53" value="token即将过期，携带refresh_token请求刷新token" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="JHoGeUMgcDAlhT3e80eg-52">
          <mxGeometry x="-0.0725" y="3" relative="1" as="geometry">
            <mxPoint y="1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-56" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;startFill=0;endSize=6;strokeColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="JHoGeUMgcDAlhT3e80eg-51">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="146" y="2161" as="targetPoint" />
            <Array as="points">
              <mxPoint x="528" y="2161" />
              <mxPoint x="528" y="2161" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-57" value="下发新的token和refresh_token" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="JHoGeUMgcDAlhT3e80eg-56">
          <mxGeometry x="0.1091" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
