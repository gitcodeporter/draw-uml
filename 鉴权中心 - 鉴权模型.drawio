<mxfile host="app.diagrams.net" modified="2021-09-14T03:31:20.896Z" agent="5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/93.0.4577.63 Safari/537.36" etag="mjN-n9IGAvIO-B-Jh00F" version="15.2.1" type="github">
  <diagram id="C5RBs43oDa-KdzZeNtuy" name="Page-1">
    <mxGraphModel dx="1426" dy="-420" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-1" parent="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="JHoGeUMgcDAlhT3e80eg-0" value="auth center" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="649" y="1710" width="116" height="548" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-33" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" vertex="1" parent="JHoGeUMgcDAlhT3e80eg-0">
          <mxGeometry x="53" y="221" width="10" height="166" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-51" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeColor=#000000;fillColor=#FFFFFF;" vertex="1" parent="JHoGeUMgcDAlhT3e80eg-0">
          <mxGeometry x="53" y="402" width="10" height="68" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-1" value="consumer" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#a20025;strokeColor=#6F0000;fontColor=#ffffff;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="83" y="1710" width="106" height="556" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-17" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" vertex="1" parent="JHoGeUMgcDAlhT3e80eg-1">
          <mxGeometry x="48.62" y="52" width="10" height="72" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-32" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" vertex="1" parent="JHoGeUMgcDAlhT3e80eg-1">
          <mxGeometry x="49" y="221" width="10" height="155" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-50" value="周&lt;br&gt;期&lt;br&gt;性" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeColor=#000000;fillColor=#FFFFFF;" vertex="1" parent="JHoGeUMgcDAlhT3e80eg-1">
          <mxGeometry x="45" y="402" width="16" height="65" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-5" value="provider" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#0050ef;strokeColor=#001DBC;fontColor=#ffffff;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="53" y="2406" width="101" height="623" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-6" value="consumer" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;fillColor=#a20025;strokeColor=#6F0000;fontColor=#ffffff;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="672.5" y="2406" width="101" height="623" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1.138;entryY=0.504;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="702" y="1805.976" as="sourcePoint" />
            <mxPoint x="143" y="1805.976" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-24" value="生成该应用的密钥，用于身份识别认证" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="JHoGeUMgcDAlhT3e80eg-22">
          <mxGeometry x="0.3739" relative="1" as="geometry">
            <mxPoint x="77" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-18" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="702" y="1762" width="10" height="61" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="141.6199999999999" y="1773" as="sourcePoint" />
            <mxPoint x="702" y="1773" as="targetPoint" />
            <Array as="points">
              <mxPoint x="616" y="1773" />
              <mxPoint x="616" y="1773" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-20" value="owner使用工号登陆管控台注册consumer应用" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="JHoGeUMgcDAlhT3e80eg-19">
          <mxGeometry x="-0.4318" y="1" relative="1" as="geometry">
            <mxPoint x="97" y="-1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-27" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="131.62" y="1857" width="10" height="60" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-31" value="将应用密钥配置在Apollo或者环境变量" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1.138;entryY=0.767;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" target="JHoGeUMgcDAlhT3e80eg-27" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="141.62" y="1868" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="185" y="1868" />
              <mxPoint x="185" y="1904" />
              <mxPoint x="147" y="1904" />
              <mxPoint x="147" y="1903" />
            </Array>
            <mxPoint x="147" y="1904" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-34" value="将（IP+应用名+密钥配置）传递给auth，请求token" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.1;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="142" y="1947" as="sourcePoint" />
            <mxPoint x="703" y="1947" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-41" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endSize=6;strokeColor=#000000;dashed=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="JHoGeUMgcDAlhT3e80eg-37">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="281" y="1987" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-42" value="识别失败" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="JHoGeUMgcDAlhT3e80eg-41">
          <mxGeometry x="-0.0093" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-48" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;startFill=0;endSize=6;strokeColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="JHoGeUMgcDAlhT3e80eg-37">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="144" y="2054" as="targetPoint" />
            <Array as="points">
              <mxPoint x="425" y="2054" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-49" value="识别成功，下发token和refresh_token" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="JHoGeUMgcDAlhT3e80eg-48">
          <mxGeometry x="0.2776" y="-1" relative="1" as="geometry">
            <mxPoint x="28" y="-1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-37" value="" style="rhombus;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="406" y="1966" width="38" height="39" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-40" value="&lt;span style=&quot;font-size: 12px ; background-color: rgb(248 , 249 , 250)&quot;&gt;对consumer进行身份识别&lt;/span&gt;" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#000000;endSize=6;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="JHoGeUMgcDAlhT3e80eg-33" target="JHoGeUMgcDAlhT3e80eg-37">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="621" y="1987" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-47" value="" style="ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="252" y="1970.5" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-52" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.2;entryY=0.4;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=none;startFill=0;endSize=6;strokeColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="142" y="2129.5" as="sourcePoint" />
            <mxPoint x="700" y="2129" as="targetPoint" />
            <Array as="points">
              <mxPoint x="421" y="2129" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-53" value="token即将过期，携带refresh_token请求刷新token" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="JHoGeUMgcDAlhT3e80eg-52">
          <mxGeometry x="-0.0725" y="3" relative="1" as="geometry">
            <mxPoint y="1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-56" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;startFill=0;endSize=6;strokeColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="JHoGeUMgcDAlhT3e80eg-51">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="146" y="2161" as="targetPoint" />
            <Array as="points">
              <mxPoint x="528" y="2161" />
              <mxPoint x="528" y="2161" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-57" value="下发新的token和refresh_token" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="JHoGeUMgcDAlhT3e80eg-56">
          <mxGeometry x="0.1091" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-58" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFFFFF;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="333.5" y="1244" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-59" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFFFFF;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="61.5" y="1389" width="130" height="84" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-60" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFFFFF;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="658.5" y="1389" width="130" height="84" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-61" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" target="JHoGeUMgcDAlhT3e80eg-72">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="450.5" y="1269" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-62" value="3、审核通过发放token" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="JHoGeUMgcDAlhT3e80eg-61">
          <mxGeometry x="0.0272" relative="1" as="geometry">
            <mxPoint x="-15" y="1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-63" value="auth center" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="328.5" y="1239" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-68" value="console" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="283.5" y="1189" width="210" height="50" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-69" value="2、登录管控台&lt;br&gt;apply资源权限" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.75;entryDx=0;entryDy=0;exitX=1;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="JHoGeUMgcDAlhT3e80eg-72" target="JHoGeUMgcDAlhT3e80eg-68">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-70" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.992;entryY=0.133;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" target="JHoGeUMgcDAlhT3e80eg-80">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="649.5" y="1389" as="sourcePoint" />
            <mxPoint x="203.5" y="1386" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-71" value="4、携带token访问服务" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="JHoGeUMgcDAlhT3e80eg-70">
          <mxGeometry x="0.14" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-72" value="consumer" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#a20025;strokeColor=#6F0000;fontColor=#ffffff;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="651.5" y="1377" width="130" height="90" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-73" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=0;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="JHoGeUMgcDAlhT3e80eg-80" target="JHoGeUMgcDAlhT3e80eg-68">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-74" value="1、登录管控台、&lt;br&gt;register资源权限" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="JHoGeUMgcDAlhT3e80eg-73">
          <mxGeometry x="-0.053" y="4" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-75" value="5、同步权限" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="JHoGeUMgcDAlhT3e80eg-80" target="JHoGeUMgcDAlhT3e80eg-63">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-76" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.667;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="JHoGeUMgcDAlhT3e80eg-80">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="203.5" y="1437.5" as="sourcePoint" />
            <mxPoint x="648.5" y="1438" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-77" value="7、返回响应" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="JHoGeUMgcDAlhT3e80eg-76">
          <mxGeometry x="-0.215" y="3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-78" value="" style="endArrow=none;dashed=1;html=1;strokeWidth=2;edgeStyle=orthogonalEdgeStyle;curved=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="185.5" y="1454" as="sourcePoint" />
            <mxPoint x="185.5" y="1404" as="targetPoint" />
            <Array as="points">
              <mxPoint x="235.5" y="1454" />
              <mxPoint x="235.5" y="1404" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-79" value="6、鉴权操作" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="JHoGeUMgcDAlhT3e80eg-78">
          <mxGeometry x="0.1333" y="4" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JHoGeUMgcDAlhT3e80eg-80" value="provider" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#0050ef;strokeColor=#001DBC;fontColor=#ffffff;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="67.5" y="1377" width="130" height="90" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
